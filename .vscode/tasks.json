{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "Build",
            "type": "shell",
            "command": "make -j4",
            "group": "build",
            "problemMatcher": ["$gcc"]
        },
        {
            "label": "Start OpenOCD Server",
            "type": "shell",
            // å¯åŠ¨å‘½ä»¤ä¿æŒä¸å˜
            "command": "/usr/bin/openocd -s /usr/share/openocd/scripts -f interface/stlink-v2.cfg -f target/stm32f4x.cfg",
            "isBackground": true,
            "problemMatcher": {
                // ä¿®å¤ï¼šåŒ¹é… CPU ç¡¬ä»¶ä¿¡æ¯ï¼Œä»£æ›¿ä¸å¯é çš„ "Listening on port 3333"
                "pattern": { "regexp": "hardware has \\d+ breakpoints, \\d+ watchpoints" }, 
                "background": {
                    "activeOnStart": true,
                    "beginsPattern": ".",
                    // ã€æ ¸å¿ƒä¿®å¤ã€‘åŒ¹é… OpenOCD æœ€ç»ˆè¾“å‡ºçš„ CPU ç¡¬ä»¶ä¿¡æ¯
                    "endsPattern": "hardware has \\d+ breakpoints, \\d+ watchpoints" 
                }
            },
            "presentation": {
                "reveal": "silent",
                "panel": "dedicated"
            }
        },
        {
            "label": "Wait for OpenOCD Startup",
            "type": "shell",
            // å¼ºåˆ¶æš‚åœ 1.5 ç§’ï¼Œç¡®ä¿ OpenOCD è¿›ç¨‹å®Œæˆåˆå§‹åŒ–ï¼Œæ¶ˆé™¤æ—¶åºé—®é¢˜
            "command": "sleep 1.5", 
            "problemMatcher": []
        },
        {
            "label": "ğŸš€ Build & Start OpenOCD (Final)",
            "dependsOrder": "sequence",
            // é¡ºåºï¼šç¼–è¯‘ -> å¯åŠ¨ OpenOCD (ç­‰å¾…ç¡¬ä»¶ä¿¡æ¯è¾“å‡º) -> å¼ºåˆ¶ç­‰å¾… 1.5 ç§’
            "dependsOn": [
                "Build", 
                "Start OpenOCD Server",
                "Wait for OpenOCD Startup" 
            ], 
            "problemMatcher": [],
            "group": {
                "kind": "build",
                "isDefault": true // æ¨èè®¾ç½®ä¸ºé»˜è®¤æ„å»ºä»»åŠ¡
            }
        }
    ]
}