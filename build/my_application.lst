ARM GAS  /tmp/ccOAP3BY.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"my_application.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.rodata.My_Application_Init.str1.4,"aMS",%progbits,1
  18              		.align	2
  19              	.LC0:
  20 0000 5247425F 		.ascii	"RGB_LED_Init...\012\000"
  20      4C45445F 
  20      496E6974 
  20      2E2E2E0A 
  20      00
  21 0011 000000   		.align	2
  22              	.LC1:
  23 0014 5247425F 		.ascii	"RGB_LED_Init OK\012\000"
  23      4C45445F 
  23      496E6974 
  23      204F4B0A 
  23      00
  24 0025 000000   		.align	2
  25              	.LC2:
  26 0028 494E4954 		.ascii	"INIT:MICROPHONE...\012\000"
  26      3A4D4943 
  26      524F5048 
  26      4F4E452E 
  26      2E2E0A00 
  27              		.align	2
  28              	.LC3:
  29 003c 494E4954 		.ascii	"INIT:MICROPHONE OK\012\000"
  29      3A4D4943 
  29      524F5048 
  29      4F4E4520 
  29      4F4B0A00 
  30              		.align	2
  31              	.LC4:
  32 0050 3D3D3D3D 		.ascii	"========== ALL SENSORS READY ==========\012\000"
  32      3D3D3D3D 
  32      3D3D2041 
  32      4C4C2053 
  32      454E534F 
  33              		.section	.text.My_Application_Init,"ax",%progbits
  34              		.align	1
  35              		.global	My_Application_Init
  36              		.arch armv7e-m
  37              		.syntax unified
ARM GAS  /tmp/ccOAP3BY.s 			page 2


  38              		.thumb
  39              		.thumb_func
  40              		.fpu fpv4-sp-d16
  42              	My_Application_Init:
  43              	.LFB139:
  44              		.file 1 "Core/Src/my_application.c"
   1:Core/Src/my_application.c **** /* USER CODE BEGIN Header */
   2:Core/Src/my_application.c **** /**
   3:Core/Src/my_application.c ****   ******************************************************************************
   4:Core/Src/my_application.c ****   * @file           : my_main.c
   5:Core/Src/my_application.c ****   * @brief          : Application sensor logic implementation
   6:Core/Src/my_application.c ****   ******************************************************************************
   7:Core/Src/my_application.c ****   * @attention
   8:Core/Src/my_application.c ****   *
   9:Core/Src/my_application.c ****   * This file contains all user-defined sensor initialization and data
  10:Core/Src/my_application.c ****   * acquisition logic, separated from CubeMX-generated main.c framework.
  11:Core/Src/my_application.c ****   *
  12:Core/Src/my_application.c ****   ******************************************************************************
  13:Core/Src/my_application.c ****   */
  14:Core/Src/my_application.c **** /* USER CODE END Header */
  15:Core/Src/my_application.c **** 
  16:Core/Src/my_application.c **** /* Includes ------------------------------------------------------------------*/
  17:Core/Src/my_application.c **** #include "my_application.h"
  18:Core/Src/my_application.c **** #include <stdarg.h>
  19:Core/Src/my_application.c **** #include <string.h>
  20:Core/Src/my_application.c **** #include <stdio.h>
  21:Core/Src/my_application.c **** #include <stdint.h>
  22:Core/Src/my_application.c **** #include <stdlib.h>
  23:Core/Src/my_application.c **** #include "dma.h"
  24:Core/Src/my_application.c **** #include "i2c.h"
  25:Core/Src/my_application.c **** #include "i2s.h"
  26:Core/Src/my_application.c **** #include "usart.h"
  27:Core/Src/my_application.c **** #include "usb_device.h"
  28:Core/Src/my_application.c **** #include "gpio.h"
  29:Core/Src/my_application.c **** #include "vcnl4040_sensor.h"
  30:Core/Src/my_application.c **** #include "ens160_sensor.h"
  31:Core/Src/my_application.c **** #include "humidity_temp_sensor.h"
  32:Core/Src/my_application.c **** #include "microphone_sensor.h"
  33:Core/Src/my_application.c **** #include "icm42688_sensor.h"
  34:Core/Src/my_application.c **** #include "methods.h"
  35:Core/Src/my_application.c **** #include "i2c_error_handler.h"
  36:Core/Src/my_application.c **** #include "i2c_dma_manager.h"
  37:Core/Src/my_application.c **** 
  38:Core/Src/my_application.c **** /* Private variables ---------------------------------------------------------*/
  39:Core/Src/my_application.c **** extern I2C_HandleTypeDef hi2c1;
  40:Core/Src/my_application.c **** extern I2S_HandleTypeDef hi2s1;
  41:Core/Src/my_application.c **** extern UART_HandleTypeDef huart1;
  42:Core/Src/my_application.c **** 
  43:Core/Src/my_application.c **** VCNL4040_HandleTypeDef vcnl4040;
  44:Core/Src/my_application.c **** static BME280_HandleTypeDef bme[8];  // 8x BME280 sensors via TCA9548A
  45:Core/Src/my_application.c **** ICM42688_HandleTypeDef icm42688;
  46:Core/Src/my_application.c **** MIC_HandleTypeDef mic;
  47:Core/Src/my_application.c **** 
  48:Core/Src/my_application.c **** static inline void DWT_Init(void)
  49:Core/Src/my_application.c **** {
  50:Core/Src/my_application.c ****   CoreDebug->DEMCR |= CoreDebug_DEMCR_TRCENA_Msk;  // Enable trace
  51:Core/Src/my_application.c ****   DWT->CYCCNT = 0;                                  // Reset counter
ARM GAS  /tmp/ccOAP3BY.s 			page 3


  52:Core/Src/my_application.c ****   DWT->CTRL |= DWT_CTRL_CYCCNTENA_Msk;             // Enable counter
  53:Core/Src/my_application.c **** }
  54:Core/Src/my_application.c **** 
  55:Core/Src/my_application.c **** /* Public functions ----------------------------------------------------------*/
  56:Core/Src/my_application.c **** 
  57:Core/Src/my_application.c **** /**
  58:Core/Src/my_application.c ****   * @brief  Initialize all sensors and peripherals
  59:Core/Src/my_application.c ****   * @retval None
  60:Core/Src/my_application.c ****   */
  61:Core/Src/my_application.c **** void My_Application_Init(void)
  62:Core/Src/my_application.c **** {
  45              		.loc 1 62 1 view -0
  46              		.cfi_startproc
  47              		@ args = 0, pretend = 0, frame = 0
  48              		@ frame_needed = 0, uses_anonymous_args = 0
  49 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  50              	.LCFI0:
  51              		.cfi_def_cfa_offset 24
  52              		.cfi_offset 3, -24
  53              		.cfi_offset 4, -20
  54              		.cfi_offset 5, -16
  55              		.cfi_offset 6, -12
  56              		.cfi_offset 7, -8
  57              		.cfi_offset 14, -4
  63:Core/Src/my_application.c ****   // ========== 传感器逐个测试 ==========
  64:Core/Src/my_application.c ****   static char msg[128];  // 声明为static避免栈溢出
  58              		.loc 1 64 3 view .LVU1
  65:Core/Src/my_application.c **** 
  66:Core/Src/my_application.c ****   strcpy(msg, "RGB_LED_Init...\n");
  59              		.loc 1 66 3 view .LVU2
  60 0002 2F4D     		ldr	r5, .L3
  61 0004 2C46     		mov	r4, r5
  62 0006 2F4E     		ldr	r6, .L3+4
  63 0008 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
  64 000a 0FC4     		stmia	r4!, {r0, r1, r2, r3}
  65 000c 3368     		ldr	r3, [r6]
  66 000e 2370     		strb	r3, [r4]
  67:Core/Src/my_application.c ****   CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
  67              		.loc 1 67 3 view .LVU3
  68              		.loc 1 67 34 is_stmt 0 view .LVU4
  69 0010 2846     		mov	r0, r5
  70 0012 FFF7FEFF 		bl	strlen
  71              	.LVL0:
  72              		.loc 1 67 3 view .LVU5
  73 0016 81B2     		uxth	r1, r0
  74 0018 2846     		mov	r0, r5
  75 001a FFF7FEFF 		bl	CDC_Transmit_FS
  76              	.LVL1:
  68:Core/Src/my_application.c ****   RGB_LED_Init();
  77              		.loc 1 68 3 is_stmt 1 view .LVU6
  78 001e FFF7FEFF 		bl	RGB_LED_Init
  79              	.LVL2:
  69:Core/Src/my_application.c ****   strcpy(msg, "RGB_LED_Init OK\n");
  80              		.loc 1 69 3 view .LVU7
  81 0022 2F46     		mov	r7, r5
  82 0024 284E     		ldr	r6, .L3+8
  83 0026 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
ARM GAS  /tmp/ccOAP3BY.s 			page 4


  84 0028 0FC7     		stmia	r7!, {r0, r1, r2, r3}
  85 002a 3368     		ldr	r3, [r6]
  86 002c 2370     		strb	r3, [r4]
  70:Core/Src/my_application.c ****   CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
  87              		.loc 1 70 3 view .LVU8
  88              		.loc 1 70 34 is_stmt 0 view .LVU9
  89 002e 2846     		mov	r0, r5
  90 0030 FFF7FEFF 		bl	strlen
  91              	.LVL3:
  92              		.loc 1 70 3 view .LVU10
  93 0034 81B2     		uxth	r1, r0
  94 0036 2846     		mov	r0, r5
  95 0038 FFF7FEFF 		bl	CDC_Transmit_FS
  96              	.LVL4:
  71:Core/Src/my_application.c ****   HAL_Delay(1000);  // 等待USB枚举完成
  97              		.loc 1 71 3 is_stmt 1 view .LVU11
  98 003c 4FF47A70 		mov	r0, #1000
  99 0040 FFF7FEFF 		bl	HAL_Delay
 100              	.LVL5:
  72:Core/Src/my_application.c **** 
  73:Core/Src/my_application.c ****   // Step 1: 初始化VCNL4040
  74:Core/Src/my_application.c ****   // strcpy(msg, "INIT:VCNL4040...\n");
  75:Core/Src/my_application.c ****   // CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
  76:Core/Src/my_application.c ****   // HAL_Delay(100);
  77:Core/Src/my_application.c ****   // VCNL4040_Init(&vcnl4040, &hi2c1, VCNL4040_I2C_ADDR_8BIT);
  78:Core/Src/my_application.c ****   // strcpy(msg, "INIT:VCNL4040 OK\n");
  79:Core/Src/my_application.c ****   // CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
  80:Core/Src/my_application.c ****   // HAL_Delay(100);
  81:Core/Src/my_application.c **** 
  82:Core/Src/my_application.c ****   // // Step 2: 初始化ICM42688
  83:Core/Src/my_application.c ****   // strcpy(msg, "INIT:ICM42688...\n");
  84:Core/Src/my_application.c ****   // CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
  85:Core/Src/my_application.c ****   // HAL_Delay(100);
  86:Core/Src/my_application.c ****   // ICM42688_Init(&icm42688, &hi2c1, ICM42688_ADDR_68);
  87:Core/Src/my_application.c ****   // strcpy(msg, "INIT:ICM42688 OK\n");
  88:Core/Src/my_application.c ****   // CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
  89:Core/Src/my_application.c ****   // HAL_Delay(100);
  90:Core/Src/my_application.c **** 
  91:Core/Src/my_application.c ****   // // Step 3: 初始化8个BME280传感器（跳过损坏的[3]）
  92:Core/Src/my_application.c ****   // for (int i = 0; i < 8; i++) {
  93:Core/Src/my_application.c ****   //   if (i == 3) {
  94:Core/Src/my_application.c ****   //     int len = sprintf(msg, "INIT:BME280[%d] SKIPPED (damaged)\n", i);
  95:Core/Src/my_application.c ****   //     CDC_Transmit_FS((uint8_t*)msg, len);
  96:Core/Src/my_application.c ****   //     HAL_Delay(50);
  97:Core/Src/my_application.c ****   //     continue;
  98:Core/Src/my_application.c ****   //   }
  99:Core/Src/my_application.c **** 
 100:Core/Src/my_application.c ****   //   int len = sprintf(msg, "INIT:BME280[%d]...\n", i);
 101:Core/Src/my_application.c ****   //   CDC_Transmit_FS((uint8_t*)msg, len);
 102:Core/Src/my_application.c ****   //   HAL_Delay(50);
 103:Core/Src/my_application.c **** 
 104:Core/Src/my_application.c ****   //   BME280_Init(&bme[i], &hi2c1, TCA9548A_ADDR_70, i, BME280_ADDR_76);
 105:Core/Src/my_application.c **** 
 106:Core/Src/my_application.c ****   //   len = sprintf(msg, "INIT:BME280[%d] OK\n", i);
 107:Core/Src/my_application.c ****   //   CDC_Transmit_FS((uint8_t*)msg, len);
 108:Core/Src/my_application.c ****   //   HAL_Delay(50);
 109:Core/Src/my_application.c ****   // }
ARM GAS  /tmp/ccOAP3BY.s 			page 5


 110:Core/Src/my_application.c **** 
 111:Core/Src/my_application.c ****   // Step 4: 初始化麦克风（I2S）
 112:Core/Src/my_application.c ****   strcpy(msg, "INIT:MICROPHONE...\n");
 101              		.loc 1 112 3 view .LVU12
 102 0044 2F46     		mov	r7, r5
 103 0046 214E     		ldr	r6, .L3+12
 104 0048 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 105 004a 0FC7     		stmia	r7!, {r0, r1, r2, r3}
 106 004c 3368     		ldr	r3, [r6]
 107 004e 2360     		str	r3, [r4]
 113:Core/Src/my_application.c ****   CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
 108              		.loc 1 113 3 view .LVU13
 109              		.loc 1 113 34 is_stmt 0 view .LVU14
 110 0050 2846     		mov	r0, r5
 111 0052 FFF7FEFF 		bl	strlen
 112              	.LVL6:
 113              		.loc 1 113 3 view .LVU15
 114 0056 81B2     		uxth	r1, r0
 115 0058 2846     		mov	r0, r5
 116 005a FFF7FEFF 		bl	CDC_Transmit_FS
 117              	.LVL7:
 114:Core/Src/my_application.c ****   HAL_Delay(100);
 118              		.loc 1 114 3 is_stmt 1 view .LVU16
 119 005e 6420     		movs	r0, #100
 120 0060 FFF7FEFF 		bl	HAL_Delay
 121              	.LVL8:
 115:Core/Src/my_application.c ****   MIC_Init(&mic, &hi2s1);
 122              		.loc 1 115 3 view .LVU17
 123 0064 1A4E     		ldr	r6, .L3+16
 124 0066 1B49     		ldr	r1, .L3+20
 125 0068 3046     		mov	r0, r6
 126 006a FFF7FEFF 		bl	MIC_Init
 127              	.LVL9:
 116:Core/Src/my_application.c ****   MIC_Start(&mic);
 128              		.loc 1 116 3 view .LVU18
 129 006e 3046     		mov	r0, r6
 130 0070 FFF7FEFF 		bl	MIC_Start
 131              	.LVL10:
 117:Core/Src/my_application.c ****   strcpy(msg, "INIT:MICROPHONE OK\n");
 132              		.loc 1 117 3 view .LVU19
 133 0074 2F46     		mov	r7, r5
 134 0076 184E     		ldr	r6, .L3+24
 135 0078 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 136 007a 0FC7     		stmia	r7!, {r0, r1, r2, r3}
 137 007c 3368     		ldr	r3, [r6]
 138 007e 2360     		str	r3, [r4]
 118:Core/Src/my_application.c ****   CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
 139              		.loc 1 118 3 view .LVU20
 140              		.loc 1 118 34 is_stmt 0 view .LVU21
 141 0080 2846     		mov	r0, r5
 142 0082 FFF7FEFF 		bl	strlen
 143              	.LVL11:
 144              		.loc 1 118 3 view .LVU22
 145 0086 81B2     		uxth	r1, r0
 146 0088 2846     		mov	r0, r5
 147 008a FFF7FEFF 		bl	CDC_Transmit_FS
 148              	.LVL12:
ARM GAS  /tmp/ccOAP3BY.s 			page 6


 119:Core/Src/my_application.c ****   HAL_Delay(100);
 149              		.loc 1 119 3 is_stmt 1 view .LVU23
 150 008e 6420     		movs	r0, #100
 151 0090 FFF7FEFF 		bl	HAL_Delay
 152              	.LVL13:
 120:Core/Src/my_application.c **** 
 121:Core/Src/my_application.c ****   strcpy(msg, "========== ALL SENSORS READY ==========\n");
 153              		.loc 1 121 3 view .LVU24
 154 0094 2C46     		mov	r4, r5
 155 0096 114E     		ldr	r6, .L3+28
 156 0098 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 157 009a 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 158 009c 0FCE     		ldmia	r6!, {r0, r1, r2, r3}
 159 009e 0FC4     		stmia	r4!, {r0, r1, r2, r3}
 160 00a0 96E80700 		ldm	r6, {r0, r1, r2}
 161 00a4 03C4     		stmia	r4!, {r0, r1}
 162 00a6 2270     		strb	r2, [r4]
 122:Core/Src/my_application.c ****   CDC_Transmit_FS((uint8_t*)msg, strlen(msg));
 163              		.loc 1 122 3 view .LVU25
 164              		.loc 1 122 34 is_stmt 0 view .LVU26
 165 00a8 2846     		mov	r0, r5
 166 00aa FFF7FEFF 		bl	strlen
 167              	.LVL14:
 168              		.loc 1 122 3 view .LVU27
 169 00ae 81B2     		uxth	r1, r0
 170 00b0 2846     		mov	r0, r5
 171 00b2 FFF7FEFF 		bl	CDC_Transmit_FS
 172              	.LVL15:
 123:Core/Src/my_application.c ****   HAL_Delay(500);
 173              		.loc 1 123 3 is_stmt 1 view .LVU28
 174 00b6 4FF4FA70 		mov	r0, #500
 175 00ba FFF7FEFF 		bl	HAL_Delay
 176              	.LVL16:
 124:Core/Src/my_application.c **** 
 125:Core/Src/my_application.c **** #ifdef ENABLE_PROFILING
 126:Core/Src/my_application.c ****   DWT_Init();  // Enable cycle counter for performance profiling
 127:Core/Src/my_application.c **** #endif
 128:Core/Src/my_application.c **** }
 177              		.loc 1 128 1 is_stmt 0 view .LVU29
 178 00be F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 179              	.L4:
 180              		.align	2
 181              	.L3:
 182 00c0 00000000 		.word	.LANCHOR0
 183 00c4 00000000 		.word	.LC0
 184 00c8 14000000 		.word	.LC1
 185 00cc 28000000 		.word	.LC2
 186 00d0 00000000 		.word	mic
 187 00d4 00000000 		.word	hi2s1
 188 00d8 3C000000 		.word	.LC3
 189 00dc 50000000 		.word	.LC4
 190              		.cfi_endproc
 191              	.LFE139:
 193              		.section	.rodata.My_Application_Run.str1.4,"aMS",%progbits,1
 194              		.align	2
 195              	.LC5:
 196 0000 256C640A 		.ascii	"%ld\012\000"
ARM GAS  /tmp/ccOAP3BY.s 			page 7


 196      00
 197              		.section	.text.My_Application_Run,"ax",%progbits
 198              		.align	1
 199              		.global	My_Application_Run
 200              		.syntax unified
 201              		.thumb
 202              		.thumb_func
 203              		.fpu fpv4-sp-d16
 205              	My_Application_Run:
 206              	.LFB140:
 129:Core/Src/my_application.c **** 
 130:Core/Src/my_application.c **** /**
 131:Core/Src/my_application.c ****   * @brief  Main sensor reading loop (infinite)
 132:Core/Src/my_application.c ****   * @retval None (never returns)
 133:Core/Src/my_application.c ****   */
 134:Core/Src/my_application.c **** void My_Application_Run(void)
 135:Core/Src/my_application.c **** {
 207              		.loc 1 135 1 is_stmt 1 view -0
 208              		.cfi_startproc
 209              		@ args = 0, pretend = 0, frame = 64
 210              		@ frame_needed = 0, uses_anonymous_args = 0
 211              	.L10:
 136:Core/Src/my_application.c ****   // // 传感器数据变量
 137:Core/Src/my_application.c ****   // uint16_t als = 0, ps = 0;
 138:Core/Src/my_application.c ****   // ICM42688_ScaledData accel = {0}, gyro = {0};
 139:Core/Src/my_application.c ****   // float imu_temp = 0;
 140:Core/Src/my_application.c **** 
 141:Core/Src/my_application.c ****   // // BME280数据缓存（静态变量，保留上次的值）
 142:Core/Src/my_application.c ****   // static float temp[8] = {28.0f, 28.0f, 28.0f, 28.0f, 28.0f, 28.0f, 28.0f, 28.0f};
 143:Core/Src/my_application.c ****   // static float hum[8] = {27.0f, 27.0f, 27.0f, 27.0f, 27.0f, 27.0f, 27.0f, 27.0f};
 144:Core/Src/my_application.c ****   // static float press[8] = {1011.0f, 1011.0f, 1011.0f, 1011.0f, 1011.0f, 1011.0f, 1011.0f, 1011.0
 145:Core/Src/my_application.c **** 
 146:Core/Src/my_application.c ****   // // 轮询索引（静态变量，每次循环递增）
 147:Core/Src/my_application.c ****   // static int bme_index = 0;
 148:Core/Src/my_application.c **** 
 149:Core/Src/my_application.c ****   // static char msg[512];
 150:Core/Src/my_application.c **** 
 151:Core/Src/my_application.c ****   while (1)
 212              		.loc 1 151 3 view .LVU31
 152:Core/Src/my_application.c ****   {
 153:Core/Src/my_application.c ****     // // === 1. 读取VCNL4040 (光线和接近传感器) ===
 154:Core/Src/my_application.c ****     // VCNL4040_ReadALS(&vcnl4040, &als);
 155:Core/Src/my_application.c ****     // VCNL4040_ReadPS(&vcnl4040, &ps);
 156:Core/Src/my_application.c **** 
 157:Core/Src/my_application.c ****     // // === 2. 读取ICM42688 (加速度计和陀螺仪) ===
 158:Core/Src/my_application.c ****     // ICM42688_ReadAll(&icm42688, &accel, &gyro, &imu_temp);
 159:Core/Src/my_application.c **** 
 160:Core/Src/my_application.c ****     // // === 3. 轮询读取单个BME280 (温湿度和气压) ===
 161:Core/Src/my_application.c ****     // if (bme_index == 3) {
 162:Core/Src/my_application.c ****     //   // BME280[3]损坏，使用常量值（已在初始化时设置）
 163:Core/Src/my_application.c ****     //   // 跳过读取，但仍然递增索引
 164:Core/Src/my_application.c ****     // } else {
 165:Core/Src/my_application.c ****     //   // 读取当前索引的BME280传感器
 166:Core/Src/my_application.c ****     //   if (TCA9548A_SelectChannel(&hi2c1, TCA9548A_ADDR_70, bme_index) == HAL_OK) {
 167:Core/Src/my_application.c ****     //     BME280_ReadData(&bme[bme_index], &temp[bme_index], &hum[bme_index], &press[bme_index]);
 168:Core/Src/my_application.c ****     //   }
 169:Core/Src/my_application.c ****     //   // I2C切换失败时保留旧值，不更新
ARM GAS  /tmp/ccOAP3BY.s 			page 8


 170:Core/Src/my_application.c ****     // }
 171:Core/Src/my_application.c **** 
 172:Core/Src/my_application.c ****     // // 切换到下一个传感器（循环0-7）
 173:Core/Src/my_application.c ****     // bme_index = (bme_index + 1) % 8;
 174:Core/Src/my_application.c **** 
 175:Core/Src/my_application.c ****     // // === 4. 输出CSV格式数据 ===
 176:Core/Src/my_application.c ****     // int len = sprintf(msg,
 177:Core/Src/my_application.c ****     //   "%u,%u,%.2f,%.2f,%.2f,%.2f,%.2f,%.2f,"  // ALS,PS,Accel_X/Y/Z,Gyro_X/Y/Z
 178:Core/Src/my_application.c ****     //   "%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,"  // Temp[0-7]
 179:Core/Src/my_application.c ****     //   "%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,"  // Hum[0-7]
 180:Core/Src/my_application.c ****     //   "%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,%.1f,"  // Press[0-7]
 181:Core/Src/my_application.c ****     //   "%.1f,%ld\n",  // IMU_Temp, Mic_Audio
 182:Core/Src/my_application.c ****     //   als, ps,
 183:Core/Src/my_application.c ****     //   accel.x, accel.y, accel.z,
 184:Core/Src/my_application.c ****     //   gyro.x, gyro.y, gyro.z,
 185:Core/Src/my_application.c ****     //   temp[0], temp[1], temp[2], temp[3], temp[4], temp[5], temp[6], temp[7],
 186:Core/Src/my_application.c ****     //   hum[0], hum[1], hum[2], hum[3], hum[4], hum[5], hum[6], hum[7],
 187:Core/Src/my_application.c ****     //   press[0], press[1], press[2], press[3], press[4], press[5], press[6], press[7],
 188:Core/Src/my_application.c ****     //   imu_temp, mic.audio_result
 189:Core/Src/my_application.c ****     // );
 190:Core/Src/my_application.c **** 
 191:Core/Src/my_application.c ****     // CDC_Transmit_FS((uint8_t*)msg, len);
 192:Core/Src/my_application.c ****     // HAL_Delay(10);  // 短暂延迟，避免USB传输过快
 193:Core/Src/my_application.c **** 
 194:Core/Src/my_application.c ****       if (mic.full_ready)
 213              		.loc 1 194 7 view .LVU32
 214              		.loc 1 194 14 is_stmt 0 view .LVU33
 215 0000 0B4B     		ldr	r3, .L11
 216 0002 5B7B     		ldrb	r3, [r3, #13]	@ zero_extendqisi2
 217              		.loc 1 194 10 view .LVU34
 218 0004 002B     		cmp	r3, #0
 219 0006 FBD0     		beq	.L10
 135:Core/Src/my_application.c ****   // // 传感器数据变量
 220              		.loc 1 135 1 view .LVU35
 221 0008 10B5     		push	{r4, lr}
 222              	.LCFI1:
 223              		.cfi_def_cfa_offset 8
 224              		.cfi_offset 4, -8
 225              		.cfi_offset 14, -4
 226 000a 90B0     		sub	sp, sp, #64
 227              	.LCFI2:
 228              		.cfi_def_cfa_offset 72
 229              	.L9:
 230              	.LBB2:
 195:Core/Src/my_application.c ****       {
 196:Core/Src/my_application.c ****         char mic_msg[64];
 231              		.loc 1 196 9 is_stmt 1 view .LVU36
 197:Core/Src/my_application.c ****         int len = sprintf(mic_msg, "%ld\n", mic.audio_result_left);
 232              		.loc 1 197 9 view .LVU37
 233              		.loc 1 197 19 is_stmt 0 view .LVU38
 234 000c 084C     		ldr	r4, .L11
 235 000e 6268     		ldr	r2, [r4, #4]
 236 0010 0849     		ldr	r1, .L11+4
 237 0012 6846     		mov	r0, sp
 238 0014 FFF7FEFF 		bl	sprintf
 239              	.LVL17:
 198:Core/Src/my_application.c ****         CDC_Transmit_FS((uint8_t *)mic_msg, len);
ARM GAS  /tmp/ccOAP3BY.s 			page 9


 240              		.loc 1 198 9 is_stmt 1 view .LVU39
 241 0018 81B2     		uxth	r1, r0
 242 001a 6846     		mov	r0, sp
 243              	.LVL18:
 244              		.loc 1 198 9 is_stmt 0 view .LVU40
 245 001c FFF7FEFF 		bl	CDC_Transmit_FS
 246              	.LVL19:
 199:Core/Src/my_application.c ****         mic.full_ready = 0;
 247              		.loc 1 199 9 is_stmt 1 view .LVU41
 248              		.loc 1 199 24 is_stmt 0 view .LVU42
 249 0020 0023     		movs	r3, #0
 250 0022 6373     		strb	r3, [r4, #13]
 251              	.L6:
 252              	.LBE2:
 151:Core/Src/my_application.c ****   {
 253              		.loc 1 151 3 is_stmt 1 view .LVU43
 194:Core/Src/my_application.c ****       {
 254              		.loc 1 194 7 view .LVU44
 194:Core/Src/my_application.c ****       {
 255              		.loc 1 194 14 is_stmt 0 view .LVU45
 256 0024 024B     		ldr	r3, .L11
 257 0026 5B7B     		ldrb	r3, [r3, #13]	@ zero_extendqisi2
 194:Core/Src/my_application.c ****       {
 258              		.loc 1 194 10 view .LVU46
 259 0028 002B     		cmp	r3, #0
 260 002a FBD0     		beq	.L6
 261 002c EEE7     		b	.L9
 262              	.L12:
 263 002e 00BF     		.align	2
 264              	.L11:
 265 0030 00000000 		.word	mic
 266 0034 00000000 		.word	.LC5
 267              		.cfi_endproc
 268              	.LFE140:
 270              		.comm	mic,16,4
 271              		.comm	icm42688,16,4
 272              		.comm	vcnl4040,8,4
 273              		.section	.bss.msg.10735,"aw",%nobits
 274              		.align	2
 275              		.set	.LANCHOR0,. + 0
 278              	msg.10735:
 279 0000 00000000 		.space	128
 279      00000000 
 279      00000000 
 279      00000000 
 279      00000000 
 280              		.text
 281              	.Letext0:
 282              		.file 2 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stdint.h"
 283              		.file 3 "Drivers/CMSIS/Include/core_cm4.h"
 284              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/system_stm32f4xx.h"
 285              		.file 5 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f446xx.h"
 286              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 287              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 288              		.file 8 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2c.h"
 289              		.file 9 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_i2s.h"
 290              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_uart.h"
ARM GAS  /tmp/ccOAP3BY.s 			page 10


 291              		.file 11 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal.h"
 292              		.file 12 "Core/Inc/vcnl4040_sensor.h"
 293              		.file 13 "Core/Inc/icm42688_sensor.h"
 294              		.file 14 "Core/Inc/microphone_sensor.h"
 295              		.file 15 "Core/Inc/my_application.h"
 296              		.file 16 "/usr/lib/gcc/arm-none-eabi/9.2.1/include/stddef.h"
 297              		.file 17 "/usr/include/newlib/sys/_types.h"
 298              		.file 18 "/usr/include/newlib/sys/reent.h"
 299              		.file 19 "/usr/include/newlib/sys/lock.h"
 300              		.file 20 "/usr/include/newlib/stdlib.h"
 301              		.file 21 "Core/Inc/i2c.h"
 302              		.file 22 "Core/Inc/i2s.h"
 303              		.file 23 "Core/Inc/usart.h"
 304              		.file 24 "Middlewares/ST/STM32_USB_Device_Library/Core/Inc/usbd_def.h"
 305              		.file 25 "Core/Inc/humidity_temp_sensor.h"
 306              		.file 26 "Middlewares/ST/STM32_USB_Device_Library/Class/CDC/Inc/usbd_cdc.h"
 307              		.file 27 "USB_DEVICE/App/usbd_cdc_if.h"
 308              		.file 28 "Core/Inc/i2c_error_handler.h"
 309              		.file 29 "Core/Inc/i2c_dma_manager.h"
 310              		.file 30 "/usr/include/newlib/stdio.h"
 311              		.file 31 "/usr/include/newlib/string.h"
 312              		.file 32 "Core/Inc/methods.h"
ARM GAS  /tmp/ccOAP3BY.s 			page 11


DEFINED SYMBOLS
                            *ABS*:0000000000000000 my_application.c
     /tmp/ccOAP3BY.s:18     .rodata.My_Application_Init.str1.4:0000000000000000 $d
     /tmp/ccOAP3BY.s:34     .text.My_Application_Init:0000000000000000 $t
     /tmp/ccOAP3BY.s:42     .text.My_Application_Init:0000000000000000 My_Application_Init
     /tmp/ccOAP3BY.s:182    .text.My_Application_Init:00000000000000c0 $d
                            *COM*:0000000000000010 mic
     /tmp/ccOAP3BY.s:194    .rodata.My_Application_Run.str1.4:0000000000000000 $d
     /tmp/ccOAP3BY.s:198    .text.My_Application_Run:0000000000000000 $t
     /tmp/ccOAP3BY.s:205    .text.My_Application_Run:0000000000000000 My_Application_Run
     /tmp/ccOAP3BY.s:265    .text.My_Application_Run:0000000000000030 $d
                            *COM*:0000000000000010 icm42688
                            *COM*:0000000000000008 vcnl4040
     /tmp/ccOAP3BY.s:274    .bss.msg.10735:0000000000000000 $d
     /tmp/ccOAP3BY.s:278    .bss.msg.10735:0000000000000000 msg.10735

UNDEFINED SYMBOLS
strlen
CDC_Transmit_FS
RGB_LED_Init
HAL_Delay
MIC_Init
MIC_Start
hi2s1
sprintf
